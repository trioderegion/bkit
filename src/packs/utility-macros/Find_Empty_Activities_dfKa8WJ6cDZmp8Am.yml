name: Find Empty Activities
type: script
author: UkXd4NXnT5o2bQiL
img: icons/svg/dice-target.svg
scope: global
command: >-
  const packId = 'dnd-players-handbook.spells';


  const pack = game.packs.get(packId);

  const index = await pack.getIndex({fields: ["system.activities"]});


  const found = index.contents.filter( d =>
  Reflect.ownKeys(d.system.activities).length == 0 )


  ui.notifications.info(`Found ${found.length} matching items`);


  found.forEach( d => fromUuid(d.uuid).then( doc => doc.sheet.render(true) ));
folder: null
ownership:
  default: 0
  UkXd4NXnT5o2bQiL: 3
flags: {}
_stats:
  compendiumSource: null
  duplicateSource: null
  coreVersion: '12.331'
  systemId: dnd5e
  systemVersion: 4.0.4
  createdTime: 1728322046722
  modifiedTime: 1728322061077
  lastModifiedBy: UkXd4NXnT5o2bQiL
_id: dfKa8WJ6cDZmp8Am
sort: 600000
_key: '!macros!dfKa8WJ6cDZmp8Am'

